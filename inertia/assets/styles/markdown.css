@reference 'tailwindcss';
@reference '@nuxt/ui';

/* Variables CSS pour Nuxt UI Markdown */
:root {
  --markdown-font-mono: ui-monospace, SFMono-Regular, 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  --markdown-border-radius: 0.5rem;
  --markdown-border-radius-sm: 0.375rem;
  --markdown-spacing: 1.5rem;
  --markdown-spacing-sm: 1rem;
}

/* Container principal */
.markdown-content {
  @apply max-w-none text-gray-700 dark:text-gray-300 leading-relaxed;
  font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;
}

/* Titres avec hiérarchie visuelle moderne */
.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4,
.markdown-content h5,
.markdown-content h6 {
  @apply font-semibold text-gray-900 dark:text-gray-100 tracking-tight;
  scroll-margin-top: 6rem;
  position: relative;
}

.markdown-content h1 {
  @apply text-4xl lg:text-5xl mb-8 mt-0;
}

.markdown-content h2 {
  @apply text-3xl mb-6 mt-12 pb-3 border-b border-gray-200 dark:border-gray-800;
}

.markdown-content h3 {
  @apply text-2xl mb-4 mt-8;
}

.markdown-content h4 {
  @apply text-xl mb-3 mt-6;
}

.markdown-content h5 {
  @apply text-lg mb-2 mt-4;
}

.markdown-content h6 {
  @apply text-base mb-2 mt-4 font-medium text-gray-600 dark:text-gray-400;
}

/* Liens d'ancrage pour les titres */
.markdown-content h1:hover .header-anchor,
.markdown-content h2:hover .header-anchor,
.markdown-content h3:hover .header-anchor,
.markdown-content h4:hover .header-anchor,
.markdown-content h5:hover .header-anchor,
.markdown-content h6:hover .header-anchor {
  @apply opacity-100;
}

.markdown-content .header-anchor {
  @apply absolute -left-6 opacity-0 transition-opacity duration-200;
  @apply text-gray-400 hover:text-primary-500 no-underline;
}

/* Paragraphes avec espacement optimisé */
.markdown-content p {
  @apply mb-6 leading-7;
}

.markdown-content p:last-child {
  @apply mb-0;
}

/* Liens avec style moderne */
.markdown-content a {
  @apply text-primary-600 dark:text-primary-400 no-underline;
  @apply hover:text-primary-700 dark:hover:text-primary-300;
  @apply transition-colors duration-200;
  @apply border-b border-primary-200 dark:border-primary-800;
  @apply hover:border-primary-400 dark:hover:border-primary-600;
}

.markdown-content a:hover {
  @apply bg-primary-50 dark:bg-primary-950 rounded-sm;
  padding: 0 2px;
  margin: 0 -2px;
}

/* Listes avec style épuré */
.markdown-content ul,
.markdown-content ol {
  @apply mb-6 pl-6;
}

.markdown-content ul {
  @apply list-none;
}

.markdown-content ul > li {
  @apply relative mb-2;
}

.markdown-content ul > li::before {
  content: '';
  @apply absolute -left-6 top-3 w-1.5 h-1.5 rounded-full;
  @apply bg-primary-500 dark:bg-primary-400;
}

.markdown-content ol {
  @apply list-decimal;
}

.markdown-content ol > li {
  @apply mb-2;
}

.markdown-content li > ul,
.markdown-content li > ol {
  @apply mt-2 mb-0;
}

/* Blockquotes avec design moderne */
.markdown-content blockquote {
  @apply border-l-4 border-primary-500 pl-6 py-2 mb-6;
  @apply bg-gray-50 dark:bg-gray-900/50 rounded-r-lg;
  @apply italic text-gray-600 dark:text-gray-400;
}

.markdown-content blockquote p {
  @apply mb-0;
}

.markdown-content blockquote p:last-child {
  @apply mb-0;
}

/* Code inline avec style subtil */
.markdown-content code {
  @apply px-2 py-1 text-sm rounded-md;
  @apply bg-gray-100 dark:bg-gray-800;
  @apply text-gray-800 dark:text-gray-200;
  @apply border border-gray-200 dark:border-gray-700;
  font-family: var(--markdown-font-mono);
}

/* Blocs de code avec syntax highlighting */
.markdown-content pre {
  @apply mb-6 overflow-x-auto rounded-lg;
  @apply bg-gray-900 dark:bg-gray-950;
  @apply border border-gray-200 dark:border-gray-800;
}

.markdown-content pre code {
  @apply block p-6 text-sm leading-relaxed;
  @apply bg-transparent border-0 text-gray-100;
  font-family: var(--markdown-font-mono);
}

/* Tableaux avec style moderne */
.markdown-content table {
  @apply w-full mb-6 border-collapse;
  @apply bg-white dark:bg-gray-900;
  @apply rounded-lg overflow-hidden;
  @apply shadow-sm border border-gray-200 dark:border-gray-800;
}

.markdown-content thead {
  @apply bg-gray-50 dark:bg-gray-800;
}

.markdown-content th {
  @apply px-6 py-4 text-left text-sm font-semibold;
  @apply text-gray-900 dark:text-gray-100;
  @apply border-b border-gray-200 dark:border-gray-700;
}

.markdown-content td {
  @apply px-6 py-4 text-sm;
  @apply border-b border-gray-200 dark:border-gray-700 last:border-b-0;
}

.markdown-content tr:hover {
  @apply bg-gray-50 dark:bg-gray-800/50;
}

/* Images avec style responsive */
.markdown-content img {
  @apply max-w-full h-auto rounded-lg mb-6;
  @apply shadow-md border border-gray-200 dark:border-gray-800;
}

/* Séparateurs horizontaux */
.markdown-content hr {
  @apply my-12 border-0 h-px;
  @apply bg-gradient-to-r from-transparent via-gray-300 to-transparent;
  @apply dark:via-gray-700;
}

/* Tasks lists (GitHub style) */
.markdown-content .task-list-item {
  @apply list-none relative;
}

.markdown-content .task-list-item input[type="checkbox"] {
  @apply absolute -left-6 top-1 w-4 h-4;
  @apply rounded border-2 border-gray-300 dark:border-gray-600;
  @apply checked:bg-primary-500 checked:border-primary-500;
}

/* Alertes/Callouts personnalisés */
.markdown-content .callout {
  @apply mb-6 p-4 rounded-lg border-l-4;
}

.markdown-content .callout-note {
  @apply bg-blue-50 dark:bg-blue-950/30 border-blue-500;
}

.markdown-content .callout-warning {
  @apply bg-yellow-50 dark:bg-yellow-950/30 border-yellow-500;
}

.markdown-content .callout-danger {
  @apply bg-red-50 dark:bg-red-950/30 border-red-500;
}

.markdown-content .callout-success {
  @apply bg-green-50 dark:bg-green-950/30 border-green-500;
}

/* Responsive design */
@media (max-width: 768px) {
  .markdown-content {
    @apply text-base;
  }

  .markdown-content h1 {
    @apply text-3xl;
  }

  .markdown-content h2 {
    @apply text-2xl;
  }

  .markdown-content h3 {
    @apply text-xl;
  }

  .markdown-content pre code {
    @apply p-4 text-xs;
  }

  .markdown-content table {
    @apply text-xs;
  }

  .markdown-content th,
  .markdown-content td {
    @apply px-3 py-2;
  }
}

/* Animations subtiles */
.markdown-content * {
  @apply transition-colors duration-200;
}

/* Print styles */
@media print {
  .markdown-content {
    @apply text-black;
  }

  .markdown-content a {
    @apply text-black no-underline;
  }

  .markdown-content pre {
    @apply border border-gray-300;
  }

  .markdown-content code {
    @apply bg-gray-100 text-black;
  }
}

/* Définition list (dl, dt, dd) */
.markdown-content dl {
  @apply mb-6;
}
.markdown-content dt {
  @apply font-semibold mt-4;
}
.markdown-content dd {
  @apply ml-4 mb-2 text-gray-600 dark:text-gray-400;
}

/* Détails/Summary */
.markdown-content details {
  @apply mb-6 border border-gray-200 dark:border-gray-700 rounded-lg p-4;
  @apply bg-gray-50 dark:bg-gray-900;
}
.markdown-content summary {
  @apply cursor-pointer font-semibold mb-2;
}

/* Abbr (abbreviations) */
.markdown-content abbr {
  @apply border-b border-dotted cursor-help;
  text-decoration: none;
}

/* KBD - touches clavier */
.markdown-content kbd {
  @apply inline-block px-2 py-1 text-xs font-mono font-semibold;
  @apply bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded;
  @apply text-gray-800 dark:text-gray-100 align-middle;
}

/* Footnotes (via markdown-it-footnote par ex.) */
.markdown-content .footnotes {
  @apply text-sm border-t border-gray-200 dark:border-gray-800 pt-4 mt-8;
}
.markdown-content .footnotes ol {
  @apply list-decimal pl-6;
}
.markdown-content .footnotes li {
  @apply mb-2;
}
.markdown-content .footnote-ref {
  @apply text-primary-500 hover:underline;
}

/* Equations mathématiques (KaTeX style override, facultatif si tu utilises une lib CSS à part) */
.markdown-content .katex {
  @apply text-base;
}
